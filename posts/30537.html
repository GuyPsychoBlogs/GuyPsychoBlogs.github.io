<!DOCTYPE HTML><html><head><meta charset="utf-8"><meta http-equiv="pragma" content="no-cache"><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="expires" content="0"><title>TCP/IP模型 | Psych0&#39;s blog</title><meta name="author" content="Psych0"><meta name="description" content="Network"><meta name="keywords" content="TCP/IP,网络基础"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="TCP/IP模型"><meta property="og:site_name" content="Psych0&#39;s blog"><meta property="og:image" content=""><link href="/favicon.png" rel="icon"><link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css"><link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css"><link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"><link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css"><link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css"><link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css"><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><script src="/js/jquery-2.0.3.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-70812759-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-70812759-1")</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Psych0's blog" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container"><button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">Psych0&#39;s blog</a><div class="collapse navbar-collapse nav-menu"><ul class="nav navbar-nav"><li><a href="/archives" title="All the articles."><i class="fa fa-archive"></i>Archives</a></li><li><a href="/categories" title="All the categories."><i class="fa fa-folder"></i>Categories</a></li><li><a href="/tags" title="All the tags."><i class="fa fa-tags"></i>Tags</a></li><li><a href="/about" title="About me."><i class="fa fa-user"></i>About</a></li><li><a href="/atom.xml" title="Subscribe me."><i class="fa fa-user"></i>RSS</a></li></ul></div></div></nav><div class="clearfix"></div><div class="container"><div class="content"><div class="page-header"><h1>TCP/IP模型</h1></div><div class="row post"><div id="top_meta"></div><div class="col-md-9"><div class="mypage"><div class="alert alert-success description"><i class="fa fa-info-circle"></i> Network</div><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/tcp&IP.png" alt="avatar"></p></blockquote><h1 id="1-TCP-IP协议模型"><a href="#1-TCP-IP协议模型" class="headerlink" title="1.TCP/IP协议模型"></a><strong><em>1.TCP/IP协议模型</em></strong></h1><blockquote><p><font color="red">TCP/IP协议模型(Transmission Control Protocol/Internet Protocol)，包含了一系列构成互联网基础的网络协议，是Internet的核心协议。</font></p></blockquote><blockquote><p>基于TCP/IP的参考模型将协议分成四个层次，它们分别是<font color="red"> 链路层、网络层、传输层和应用层。</font>下图表示TCP/IP模型与OSI模型各层的对照关系。</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E5%88%86%E5%B1%82.jpg" alt="avatar"></p></blockquote><blockquote><p>TCP/IP协议族按照层次<font color="red">由上到下，层层包装。最上面的是应用层，</font>这里面有<font color="green">http，ftp，SMTP，Telnet… 等我们熟悉的协议。</font>而<font color="red">第二层则是传输层，著名的<font color="red">TCP和UDP协议就在这个层次</font></font>。<font color="red">第三层是网络层，IP协议就在这里，</font><font color="green">它负责对数据加上<font color="red">IP地址和其他的数据</font>以确定传输的目标</font>。<font color="red">第四层是数据链路层</font>，这个层次为待传送的数据加入一个<font color="red">以太网协议头</font>，并进行<font color="red">CRC 校验编码</font>，<font color="green">为最后的数据传输做准备。</font></p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E5%8D%8F%E8%AE%AE%E6%A0%88%E5%B0%81%E8%A3%85.jpg" alt="avatar"></p></blockquote><blockquote><p>上图清楚地表示了 <font color="red">TCP/IP协议中每个层的作用</font>，而TCP/IP协议通信的过程其实就对应着<font color="red">数据入栈与出栈的过程</font>。入栈的过程，<font color="red">数据发送方每层不断地封装首部与尾部</font>，<font color="green">添加一些传输的信息，确保能传输到目的地。</font>出栈的过程，<font color="red">数据接收方每层不断地拆除首部与尾部</font>，<font color="green">得到最终传输的数据。</font></p></blockquote><h3 id="TCP协议的特点："><a href="#TCP协议的特点：" class="headerlink" title="TCP协议的特点："></a><strong><em>TCP协议的特点：</em></strong></h3><blockquote><font color="red"><ul><li>三次握手建立可靠连接</li><li>端口号 多路复用</li><li>完整性校验</li><li>确认机制</li><li>应答接收</li><li>序列号</li><li>丢失检测、乱序重排</li><li>窗口机制</li><li>流量控制</li></ul></font></blockquote><h3 id="TCP连接的建立与终止"><a href="#TCP连接的建立与终止" class="headerlink" title="TCP连接的建立与终止"></a><strong><em>TCP连接的建立与终止</em></strong></h3><blockquote><h3 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a><strong><em>三次握手</em></strong></h3><hr><p><font color="red">TCP是面向连接的，无论哪一方向另一方发送数据之前，都必须先在双方之间建立一条连接。</font>在TCP/IP协议中，TCP协议提供可靠的连接服务，<font color="red">连接是通过三次握手进行初始化的。</font><font color="green">三次握手的目的是同步连接双方的序列号和确认号并交换 TCP窗口大小信息。</font></p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.jpg" alt="avatar"></p></blockquote><blockquote><ul><li><font color="red">第一次握手：</font><br>建立连接。客户端发送连接请求报文段，<font color="red">将SYN位置为1，Sequence Number为x；</font>然后，客户端进入SYN_SEND状态，等待服务器的确认；</li><li><font color="red">第二次握手：</font><br>服务器收到SYN报文段。服务器收到客户端的SYN报文段，需要对这个SYN报文段进行确认，设置Acknowledgment Number为x+1(Sequence Number+1)；同时，自己自己还要发送SYN请求信息，将SYN位置为1，Sequence Number为y；服务器端将上述所有信息放到一个报文段（即SYN+ACK报文段）中，一并发送给客户端，此时服务器进入SYN_RECV状态；</li><li><font color="red">第三次握手：</font><br>客户端收到服务器的SYN+ACK报文段。然后将Acknowledgment Number设置为y+1，向服务器发送ACK报文段，这个报文段发送完毕以后，客户端和服务器端都进入ESTABLISHED状态，完成TCP三次握手。</li></ul></blockquote><blockquote><ul><li><font color="red">为什么要三次握手？</font><br><font color="green">“为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误。”</font></li></ul></blockquote><blockquote><pre><code>      具体例子：“已失效的连接请求报文段”的产生在这样一种情况下：client发出的第一个连接请求报文段并没有丢失，而是在某个网络结点长时间的滞留了，以致延误到连接释放以后的某个时间才到达server。本来这是一个早已失效的报文段。但server收到此失效的连接请求报文段后，就误认为是client再次发出的一个新的连接请求。</code></pre><hr><pre><code>      于是就向client发出确认报文段，同意建立连接。假设不采用“三次握手”，那么只要server发出确认，新的连接就建立了。由于现在client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送数据。但server却以为新的运输连接已经建立，并一直等待client发来数据。这样，server的很多资源就白白浪费掉了。采用“三次握手”的办法可以防止上述现象发生。例如刚才那种情况，client不会向server的确认发出确认。server由于收不到确认，就知道client并没有要求建立连接。”</code></pre></blockquote><blockquote><h3 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a><strong><em>四次挥手</em></strong></h3><hr><p><font color="green">当客户端和服务器通过三次握手建立了TCP连接以后，当数据传送完毕，肯定是要断开TCP连接的啊。那对于TCP的断开连接，这里就有了神秘的“四次分手”。</font><br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B.jpg" alt="avatar"></p></blockquote><h3 id="TCP-UDP"><a href="#TCP-UDP" class="headerlink" title="TCP/UDP"></a><strong><em>TCP/UDP</em></strong></h3><hr><blockquote><p><font color="red">TCP/UDP都是是传输层协议，但是两者具有不同的特性，同时也具有不同的应用场景，</font>下面以图表的形式对比分析。</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/TCP&UDP%E5%AF%B9%E6%AF%941.jpg" alt="avatar"></p></blockquote><blockquote><p><font color="red">面向报文</font></p><p>面向报文的传输方式是应用层交给UDP多长的报文，UDP就照样发送，即一次发送一个报文。因此，应用程序必须选择合适大小的报文。若报文太长，则IP层需要分片，降低效率。若太短，会是IP太小。</p></blockquote><blockquote><p><font color="red">面向字节流</font></p><p>面向字节流的话，虽然应用程序和TCP的交互是一次一个数据块（大小不等），但TCP把应用程序看成是一连串的无结构的字节流。TCP有一个缓冲，当应用程序传送的数据块太长，TCP就可以把它划分短一些再传送。<br>关于<font color="red">拥塞控制，流量控制，是TCP的重点，</font></p></blockquote><blockquote><p><font color="red">TCP和UDP协议的一些应用</font></p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/TCP&UDP%E5%AF%B9%E6%AF%942.jpg" alt="avatar"></p></blockquote><blockquote><p><font color="red">什么时候应该使用TCP？</font><br>当对网络通讯质量有要求的时候，比如：整个数据要准确无误的传递给对方，这往往用于一些要求可靠的应用，比如HTTP、HTTPS、FTP等传输文件的协议，POP、SMTP等邮件传输的协议。</p></blockquote><blockquote><p><font color="red">什么时候应该使用UDP？</font><br>当对网络通讯质量要求不高的时候，要求网络通讯速度能尽量的快，这时就可以使用UDP。</p></blockquote><hr><blockquote><h3 id="TCP流量控制"><a href="#TCP流量控制" class="headerlink" title=" TCP流量控制 "></a><strong><em><font color="red"> TCP流量控制</font></em></strong></h3></blockquote><hr><blockquote><p>如果发送方把<font color="red">数据发送得过快，接收方可能会来不及接收，这就会造成数据的丢失。</font><font color="green">所谓流量控制就是让发送方的发送速率不要太快，要让接收方来得及接收。</font></p></blockquote><blockquote><p><font color="green">利用<font color="red">滑动窗口机制</font>可以很方便地在TCP连接上实现对发送方的流量控制。</font></p></blockquote><blockquote><pre><code>       设A向B发送数据。在连接建立时，B告诉了A：“我的接收窗口是 rwnd = 400 ”(这里的 rwnd 表示 receiver window) 。</code></pre></blockquote><hr><blockquote><pre><code>       因此，发送方的发送窗口不能超过接收方给出的接收窗口的数值。请注意，TCP的窗口单位是字节，不是报文段。假设每一个报文段为100字节长，而数据报文段序号的初始值设为1。大写ACK表示首部中的确认位ACK，小写ack表示确认字段的值ack。</code></pre></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E7%AA%97%E5%8F%A3%E6%BB%91%E5%8A%A8%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6.jpg" alt="avatar"></p></blockquote><blockquote><pre><code>          从图中可以看出，B进行了三次流量控制。第一次把窗口减少到 rwnd = 300 ，第二次又减到了 rwnd = 100 ，最后减到 rwnd = 0 ，即不允许发送方再发送数据了。这种使发送方暂停发送的状态将持续到主机B重新发出一个新的窗口值为止。B向A发送的三个报文段都设置了 ACK = 1 ，只有在ACK=1时确认号字段才有意义。</code></pre></blockquote><blockquote><pre><code>          TCP为每一个连接设有一个持续计时器(persistence timer)。只要TCP连接的一方收到对方的零窗口通知，就启动持续计时器。若持续计时器设置的时间到期，就发送一个零窗口控测报文段（携1字节的数据），那么收到这个报文段的一方就重新设置持续计时器。</code></pre></blockquote><blockquote><h3 id="TCP拥塞控制"><a href="#TCP拥塞控制" class="headerlink" title=" TCP拥塞控制"></a><strong><em><font color="red"> TCP拥塞控制</font></em></strong></h3></blockquote><hr><blockquote><p>发送方维持一个拥塞窗口 <font color="red">cwnd ( congestion window )的状态变量。</font>拥塞窗口的大小<font colo="green">取决于网络的拥塞程度，并且动态地在变化。</font>发送方让自己的发送窗口等于拥塞窗口。</p></blockquote><blockquote><p>发送方控制拥塞窗口的原则是：<font color="red">只要网络没有出现拥塞，拥塞窗口就再增大一些，以便把更多的分组发送出去。但只要网络出现拥塞，拥塞窗口就减小一些，以减少注入到网络中的分组数。</font></p></blockquote><blockquote><p><font color="red"><strong><em>慢开始算法：</em></strong></font></p></blockquote><blockquote><p>当主机开始发送数据时，如果立即所大量数据字节注入到网络，那么就有可能引起网络拥塞，因为现在并不清楚网络的负荷情况。因此，较好的方法是 先探测一下，即由小到大逐渐增大发送窗口，也就是说，<font color="red">由小到大逐渐增大拥塞窗口数值。</font></p></blockquote><blockquote><p>通常在刚刚开始发送报文段时，<font color="red">先把拥塞窗口 cwnd 设置为一个最大报文段MSS的数值。</font>&lt;/font color=green&gt;而在每收到一个对新的报文段的确认后，把拥塞窗口增加至多一个MSS的数值。用这样的方法逐步增大发送方的拥塞窗口 cwnd ，可以使分组注入到网络的速率更加合理。</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B61.jpg" alt="avatar"></p></blockquote><blockquote><p>每经过一个传输轮次，拥塞窗口 cwnd 就加倍。一个传输轮次所经历的时间其实就是往返时间RTT。不过“传输轮次”更加强调：把拥塞窗口cwnd所允许发送的报文段都连续发送出去，并收到了对已发送的最后一个字节的确认。</p></blockquote><blockquote><p>另外，<font color="red">慢开始的“慢”并不是指cwnd的增长速率慢，而是指在TCP开始发送报文段时先设置cwnd=1，</font>使得发送方在开始时只发送一个报文段（目的是试探一下网络的拥塞情况），<font color="green">然后再逐渐增大cwnd。</font></p></blockquote><blockquote><p>为了防止拥塞窗口cwnd增长过大引起网络拥塞，还需要设置一个慢开始门限ssthresh状态变量。慢开始门限ssthresh的用法如下：</p><ul><li><p>当 cwnd &lt; ssthresh 时，使用上述的慢开始算法。</p></li><li><p>当 cwnd &gt; ssthresh 时，停止使用慢开始算法而改用拥塞避免算法。</p></li><li><p>当 cwnd = ssthresh 时，既可使用慢开始算法，也可使用拥塞控制避免算法。拥塞避免</p></li></ul></blockquote><hr><blockquote><p><font color="red"><strong><em>拥塞避免:</em></strong></font></p></blockquote><hr><blockquote><pre><code>  让拥塞窗口cwnd缓慢地增大，即每经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1，而不是加倍。这样拥塞窗口cwnd按线性规律缓慢增长，比慢开始算法的拥塞窗口增长速率缓慢得多。</code></pre></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B62.jpg" alt="avatar"></p></blockquote><blockquote><p><font color="red">无论在慢开始阶段还是在拥塞避免阶段，只要发送方判断网络出现拥塞（其根据就是没有收到确认），就要把慢开始门限ssthresh设置为出现拥塞时的发送 方窗口值的一半（但不能小于2）。</font>然后把拥塞窗口cwnd重新设置为1，执行慢开始算法。</p></blockquote><blockquote><p>这样做的<font color="red">目的就是要迅速减少主机发送到网络中的分组数，使得发生 拥塞的路由器有足够时间把队列中积压的分组处理完毕。</font></p></blockquote><blockquote><p>如下图，用具体数值说明了上述拥塞控制的过程。现在发送窗口的大小和拥塞窗口一样大</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B63.jpg" alt="avatar"></p></blockquote><blockquote><h3 id="快重传和快恢复"><a href="#快重传和快恢复" class="headerlink" title=" 快重传和快恢复"></a><strong><em><font color="red"> 快重传和快恢复</font></em></strong></h3></blockquote><hr><blockquote><p><font color="red">快重传</font></p><p>快重传算法<font color="red">首先要求接收方每收到一个失序的报文段后就立即发出重复确认</font>（<font color="green">为的是使发送方及早知道有报文段没有到达对方</font>）而不要等到自己发送数据时才进行捎带确认。</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E5%BF%AB%E9%87%8D%E4%BC%A0%E5%92%8C%E5%BF%AB%E6%81%A2%E5%A4%8D.jpg" alt="avatar"></p></blockquote><blockquote><pre><code>          接收方收到了M1和M2后都分别发出了确认。现在假定接收方没有收到M3但接着收到了M4。</code></pre></blockquote><blockquote><pre><code>          显然，接收方不能确认M4，因为M4是收到的失序报文段。根据 可靠传输原理，接收方可以什么都不做，也可以在适当时机发送一次对M2的确认。</code></pre></blockquote><blockquote><pre><code>          但按照快重传算法的规定，接收方应及时发送对M2的重复确认，这样做可以让 发送方及早知道报文段M3没有到达接收方。发送方接着发送了M5和M6。接收方收到这两个报文后，也还要再次发出对M2的重复确认。这样，发送方共收到了 接收方的四个对M2的确认，其中后三个都是重复确认。</code></pre></blockquote><blockquote><pre><code>          快重传算法还规定，发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段M3，而不必 继续等待M3设置的重传计时器到期。</code></pre></blockquote><blockquote><pre><code>          由于发送方尽早重传未被确认的报文段，因此采用快重传后可以使整个网络吞吐量提高约20%。</code></pre></blockquote><blockquote><p><font color="red">快恢复</font></p><p><font color="red">与快重传配合使用的还有快恢复算法</font>，其过程有以下两个要点：</p><ul><li><font color="green">当发送方连续收到三个重复确认，就执行“乘法减小”算法</font>，<font color="red">把慢开始门限ssthresh减半。</font></li><li><font color="red">与慢开始不同之处是现在不执行慢开始算法（即拥塞窗口cwnd现在不设置为1）</font>，<font colo="green">而是把cwnd值设置为 慢开始门限ssthresh减半后的数值</font>，<font color="red">然后开始执行拥塞避免算法（“加法增大”），使拥塞窗口缓慢地线性增大。</font></li></ul></blockquote><hr><blockquote><h3 id="TCP报文结构："><a href="#TCP报文结构：" class="headerlink" title="TCP报文结构："></a><strong><em>TCP报文结构：</em></strong></h3></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/tcp%E5%B1%82%E5%A4%B4.png" alt="avatar"></p></blockquote><h2 id="2-抓个TCP包看看"><a href="#2-抓个TCP包看看" class="headerlink" title="2.抓个TCP包看看"></a><strong><em>2.抓个TCP包看看</em></strong></h2><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/packet.png" alt="avatar"><br><font color="red">1、Frame：物理层的数据帧概况<br>2、Ethernet II：数据链路层以太网帧头部信息<br>3、Internet Protocol Version 4：互联网层IP包头部信息<br>4、Transmission Control Protocol：传输层的数据段头部信息，此处是TCP</font></p></blockquote><h2 id="3-各个字段的解释"><a href="#3-各个字段的解释" class="headerlink" title="3.各个字段的解释"></a><strong><em>3.各个字段的解释</em></strong></h2><blockquote><h4 id="源端口（Source-Port），目标端口（Destination-Port）-各2字节"><a href="#源端口（Source-Port），目标端口（Destination-Port）-各2字节" class="headerlink" title="源端口（Source Port），目标端口（Destination Port） 各2字节"></a>源端口（Source Port），目标端口（Destination Port） 各2字节</h4><p>源端口号，标识主机上发起传送的应用程序<br>目的端口,标识主机上传送要到达的应用程序<br>这两个值加上I P首部中的源端I P地址和目的端I P地址唯一确定一个TCP连接。</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E6%BA%90.png" alt="avatar"></p></blockquote><blockquote><h4 id="封包序号（Sequence-Number）-4字节"><a href="#封包序号（Sequence-Number）-4字节" class="headerlink" title="封包序号（Sequence Number） 4字节"></a>封包序号（Sequence Number） 4字节</h4><p>由于 TCP 封包必须要带入 IP 封包当中，所以如果 TCP 数据太大时(大于 IP 封包的容许程度)， 就得要进行分段。<font color="red">这个 Sequence Number 就是记录每个封包的序号，可以让收受端重新将 TCP 的数据组合起来。</font><br>序号字段的值则指的是本报文段所发送的数据的第一个字节的序号。</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/seq.png" alt="avatar"></p></blockquote><blockquote><h4 id="确认号（Acknowledge-Number）-4字节"><a href="#确认号（Acknowledge-Number）-4字节" class="headerlink" title="确认号（Acknowledge Number） 4字节"></a>确认号（Acknowledge Number） 4字节</h4><p>为了确认主机端确实有收到我们 client 端所送出的封包数据，我们 client 端当然希望能够收到主机方面的响应<br>那就是这个 Acknowledge Number 的用途了。<br><font color="red">当 client 端收到这个确认码时，就能够确定之前传递的封包已经被正确的收下了。</font><br>这个号是期望收到对方的下一个报文段的数据的第一个字节的序号</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/ack.png" alt="avatar"></p></blockquote><blockquote><h4 id="数据偏移（Data-Offset）4比特"><a href="#数据偏移（Data-Offset）4比特" class="headerlink" title="数据偏移（Data Offset）4比特"></a>数据偏移（Data Offset）4比特</h4><p>和IP数据包头部一样，也有个Options字段，长度是不固定的，<font color="red">而为了要确认整个TCP封包大小，就需要这个标志来说明整个封包区段的起始位置。</font><br><font color="green">这个字段指出TCP报文段的数据起始处距离 TCP报文段的起始处有多远。</font><font color="red">“数据偏移”的单位不是字节而是32bit字（4字节为计算单位）。</font><br><font color="red">没有任何选项字段的TCP头部长度为20字节；</font><font color="green">最多可以有60字节的TCP头部。</font></p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/dataoffset.png" alt="avatar"></p></blockquote><blockquote><h4 id="保留字段（Reserved）-占6比特"><a href="#保留字段（Reserved）-占6比特" class="headerlink" title="保留字段（Reserved） 占6比特"></a>保留字段（Reserved） 占6比特</h4><p>保留为今后使用，但目前应置为0</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/reserved.png" alt="avatar"></p></blockquote><hr><h3 id="4-状态控制码（Code，Control-Flag）"><a href="#4-状态控制码（Code，Control-Flag）" class="headerlink" title="4.状态控制码（Code，Control Flag）"></a><strong><em>4.状态控制码（Code，Control Flag）</em></strong></h3><blockquote><p>标志位字段（U、A、P、R、S、F）：占6比特。</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/code.png" alt="avatar"></p></blockquote><blockquote><p><font color="red">各字段的含义如下:</font></p></blockquote><blockquote><h5 id="紧急URG："><a href="#紧急URG：" class="headerlink" title="紧急URG："></a>紧急URG：</h5><p><font color="red">当URG=1，表明紧急指针字段有效。</font>这时发送方TCP就把紧急数据插入到本报文段数据的最前面，而在紧急数据后面的数据仍是普通数据。<br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/URG.png" alt="avatar"></p></blockquote><blockquote><h5 id="确认ACK："><a href="#确认ACK：" class="headerlink" title="确认ACK："></a>确认ACK：</h5><p><font color="red">当ACK=1时，确认字段才有效。当ACK=0时，确认号无效。</font>TCP规定，在连接建立后所有传送的报文段都必须把ACK置1。<br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/ACK2.png" alt="avatar"></p></blockquote><blockquote><h5 id="推送PSH："><a href="#推送PSH：" class="headerlink" title="推送PSH："></a>推送PSH：</h5><p><font color="red">接收方TCP收到PSH=1的报文段，就尽快地交付给接收应用进程，而不再等到整个缓存都填满了后再向上交付。</font><br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/PSH.png" alt="avatar"></p></blockquote><blockquote><h5 id="复位RST："><a href="#复位RST：" class="headerlink" title="复位RST："></a>复位RST：</h5><p><font color="red">当RST=1时，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立运输连接。</font><br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/RST.png" alt="avatar"></p></blockquote><blockquote><h5 id="同步SYN："><a href="#同步SYN：" class="headerlink" title="同步SYN："></a>同步SYN：</h5><p>在连接建立时用来同步序号。<font color="red">当SYN=1而ACK=0时，表明这是一个连接请求报文段。</font>对方若同意建立连接，则应在响应的报文段中使SYN=1和ACK=1。故SYN置为1，就表示这是一个连接请求和连接接收报文<br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/SYN.png" alt="avatar"></p></blockquote><blockquote><h5 id="终止FIN："><a href="#终止FIN：" class="headerlink" title="终止FIN："></a>终止FIN：</h5><p>用来释放连接。<font color="red">当FIN=1时，表明此报文段的发送方的数据已发送完毕，并要求释放运输连接。</font><br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/FIN.png" alt="avatar"></p></blockquote><blockquote><h5 id="滑动窗口（Window）"><a href="#滑动窗口（Window）" class="headerlink" title="滑动窗口（Window）"></a>滑动窗口（Window）</h5><p>占2字节<br><font color="red">窗口字段用来控制对方发送的数据量</font>，可以告知对方目前本身有的<font color="red">缓冲器容量(Receive Buffer)</font> 还可以接收封包。<font color="red">当 Window=0 时，代表缓冲器已经额满，所以应该要暂停传输数据。</font><br>单位为字节。<br>TCP连接的一端根据设置的缓存空间大小确定自己的接收窗口大小，然后通知对方以确定对方的发送窗口的上限,这个值是本机期望一次接收的字节数。<br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/WINDOW.png" alt="avatar"></p></blockquote><blockquote><h5 id="TCP校验和-Checksum"><a href="#TCP校验和-Checksum" class="headerlink" title="TCP校验和(Checksum)  "></a>TCP校验和(Checksum)  </h5><p>占2字节<br>当数据要由发送端送出前，会进行一个检验的动作，并将该动作的检验值标注在这个字段上；<br>而接收者收到这个封包之后，会再次的对封包进行验证，并且比对原发送的 Checksum 值是否相符，如果相符就接受，若不符就会假设该封包已经损毁，进而要求对方重新发送此封包！<font color="red">在计算检验和时，要在TCP报文段的前面加上12字节的伪首部。</font></p></blockquote><blockquote><h5 id="紧急指针-Urgent-Pointer"><a href="#紧急指针-Urgent-Pointer" class="headerlink" title="紧急指针(Urgent Pointer)"></a>紧急指针(Urgent Pointer)</h5><p>占2字节<br>这个字段是在 Code 字段内的 URG = 1 时才会产生作用。可以告知紧急数据所在的位置(紧急指针指出在本报文段中的紧急数据的最后一个字节的序号)</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/urgrent.png" alt="avatar"></p></blockquote><blockquote><h5 id="选项（Options）"><a href="#选项（Options）" class="headerlink" title="选项（Options）"></a>选项（Options）</h5><p><font color="red">TCP首部可以有多达40字节的可选信息，</font>用于把附加信息传递给终点，或用来对齐其它选项。<br>目前此字段仅应用于表示接收端可以接收的最大数据区段容量，若此字段不使用， 表示可以使用任意数据区段的大小。<br> 这个字段较少使用</p></blockquote><blockquote><h5 id="TCP首部的主要选项："><a href="#TCP首部的主要选项：" class="headerlink" title="TCP首部的主要选项："></a>TCP首部的主要选项：</h5><p><font color="red">最大报文段长度MSS(Maximum Segment Size)是TCP报文段中的数据字段的最大长度。</font><br>MSS告诉对方TCP：“我的缓存所能接收的报文段的数据字段的最大长度是MSS个字节。”</p></blockquote><blockquote><h5 id="填充字段-Padding"><a href="#填充字段-Padding" class="headerlink" title="填充字段(Padding):"></a>填充字段(Padding):</h5></blockquote><blockquote><p>如同 <font color="red">IP 封包需要有固定的 32bits 表头一样</font>， Options 由于字段为非固定， 所以也需要 Padding 字段来加以补齐才行。</p><p>同样也是 32 bits 的整数。</p><p>这是为了使整个首部长度是4字节的整数倍。</p></blockquote><h4 id="5-UDP报文结构"><a href="#5-UDP报文结构" class="headerlink" title="5.UDP报文结构"></a><strong><em>5.UDP报文结构</em></strong></h4><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/UDP%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%84.jpg" alt="avatar"></p></blockquote><blockquote><p>使用wireshak 抓个UDP报文</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/UDP%E6%8A%A5%E6%96%87%E5%AD%97%E6%AE%B5.png" alt="avatar"><br>各个字段解释</p></blockquote><blockquote><p>源端口(source Port)：源端口号。在需要对方回信时选用。不需要时可用全0。</p></blockquote><blockquote><p>目的端口(Destination Port)：目的端口号。这在终点交付报文时必须要使用到。</p></blockquote><blockquote><p><font color="green">长度(Length)： UDP用户数据报的长度，其最小值是8（仅有首部）。</font></p></blockquote><blockquote><p><font color="red">校验和(Checksum)：检测UDP用户数据报在传输中是否有错。有错就丢弃</font></p></blockquote><blockquote><p><font color="green">时间戳(timestamps):从第一帧开始的时间 距上一帧的时间</font></p></blockquote><blockquote><p>数据(Data)：用户传输的数据</p></blockquote><blockquote><p>另外：<br><font color="red">UDP数据报需包含一个12字节长的伪首部，它是为了计算检验和而设置的</font><br><font color="green">伪首部既不向下传送也不向上递交，而仅仅是为了计算校验和</font></p></blockquote><h4 id="6-IP的头部封装："><a href="#6-IP的头部封装：" class="headerlink" title="6.IP的头部封装："></a><strong><em>6.IP的头部封装：</em></strong></h4><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/ip%E6%8A%A5%E6%96%87%E5%A4%B4%E9%83%A8%E5%B0%81%E8%A3%85.jpg" alt="avatar"></p></blockquote><blockquote><p><font color="red">IP协议是TCP/IP协议的核心</font>，<font color="green">所有的</font><font color="red">TCP，UDP，IMCP，IGMP的数据都以IP数据格式传输。</font><font color="green">要注意的是，IP不是可靠的协议，这是说，IP协议没有提供一种数据未传达以后的处理机制，</font>这被认为是上层协议：TCP或UDP要做的事情。</p></blockquote><blockquote><ul><li><font color="red">在数据链路层中我们一般通过MAC地址来识别不同的节点，而在IP层我们也要有一个类似的地址标识，这就是IP地址。</font></li></ul></blockquote><blockquote><ul><li>32位IP地址分为网络位和地址位，这样做可以减少路由器中路由表记录的数目，有了网络地址，就可以限定拥有相同网络地址的终端都在同一个范围内，那么路由表只需要维护一条这个网络地址的方向，就可以找到相应的这些终端了。</li></ul></blockquote><blockquote><ul><li>A类地址 <font color="red">1～126 默认子网掩码 255.0.0.0</font></li><li>B类地址 <font color="red">128～191 默认子网掩码 255.255.0.0</font></li><li>C类地址 <font color="red">192～223 默认子网掩码 255.255.255.0</font></li><li>D类地址 <font color="red">224～239 组播地址</font></li><li>E类地址 <font color="red">240～254 科研使用</font></li><li>B C两类的私有地址是我们局域网常用的段<br>我们常说的C段就是C类地址<font color="green"></font></li></ul></blockquote><blockquote><ul><li>私有地址<ul><li>10.0.0.0~10.255.255.255</li><li>172.16.0.0~172.31.255.255</li><li>192.168.0.0~192.168.255.255</li></ul></li></ul></blockquote><blockquote><p>IP数据包由<font color="red">报头和数据两部分组成。</font>报头的前一部分是<font color="red">固定长度，共20字节。</font> <font color="green">在报头的固定部分的后面是可选部分——IP选项和填充域。</font></p></blockquote><blockquote><p>抓个包看看</p></blockquote><hr><h5 id="IP报文各字段的含义如下"><a href="#IP报文各字段的含义如下" class="headerlink" title="IP报文各字段的含义如下"></a><strong><em>IP报文各字段的含义如下</em></strong></h5><blockquote><p>1、版本<br>占4位，指IP协议的版本。</p><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IP%E7%89%88%E6%9C%AC.png" alt="avatar"></p></blockquote><blockquote><p>2、报头长度<br><font color="red">占4位，该字段的单位是32位字（1个32位字长是4字节）</font>，因此当IP报头长度为1111时，报头长度就达到最大值60字节。当IP分组的首部长度不是4字节的整数倍是，就需要对填充域加以填充。最常用的报头长度为20位(报头长度值为0101)，这时不使用任何选项。</p><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IP%E5%A4%B4%E9%83%A8%E9%95%BF%E5%BA%A6.png" alt="avatar"></p></blockquote><blockquote><p>3、区分服务（服务类型）<br><font color="red">占8位，在一般情况下都不使用这个字段。</font></p><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IP%E5%8C%BA%E5%88%86%E6%9C%8D%E5%8A%A1.png" alt="avatar"></p></blockquote><blockquote><p>4、总长度<br>指报头和数据之和的长度，单位是字节。总长度字段为16位，故IP数据报的最大长度为65535。<br>每一种数据 链路层都有其自己的帧格式，其中包括帧格式中的数据字段的最大长度，这称为最大传送单元MTU。当IP数据报封装成链路层的帧时，此数据报的总长度不能超过对应MTU的值。<font color="red">若数据报长度超过对于MTU的值，就将数据报进行分片处理，</font>此时数据报首部中的“总长度“字段是指分片后的每一个分片的报头长度和数据长度之和。<br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IP%E6%80%BB%E9%95%BF%E5%BA%A6.png" alt="avatar"></p></blockquote><blockquote><p>5、标识<br><font color="red">占16位。</font>IP软件在存储器中维持一个计数器，每产生一个数据报，计数器就加1，并赋给标识字段。当数据报进行分片处理后，每个分片的标识值都与原数据报的标识值相同，则在接收端具有相同标识值的分片就能最终正确的重装成为原来的数据报。<br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IP%E6%A0%87%E8%AF%86.png" alt="avatar"><br>6、标志<br>占3位，但目前只有两位有意义。<br>最低位记为MF。MF=1即表示后面”还有分片“的数据包。MF=0表示这已是若干数据包片中的最后一个。<br>中间位记为DF，意思是”不能分片“。<font color="red">只有当DF=0时才允许分片。</font><br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IPFlag.png" alt="avatar"><br>7、片偏移<br><font color="red">占13位。</font>表示每个数据报的分片<font color="red">在原数据报中的相对位置。</font><font color="green">片偏移以8个字节为偏移单位，即每个分片的长度一定是8字节的整数倍。</font><br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IPOffset.png" alt="avatar"><br>8、生存时间<br><font color="red">占8位。</font><font color="green">表示数据报在网络中的寿命。最初以秒为TTL值为单位，现在以跳数为单位，则目前的最大数据为255.</font><br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4.png" alt="avatar"><br>9、协议<br><font color="red">占8位，</font><font color="green">指出此数据报携带的数据是使用何种协议，以便使目的主机的IP层知道应将数据部分上交给那个处理过程。</font><br><font color="red">TCP对应协议字段值6；UDP对应协议字段值17</font></p><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IP%E5%8D%8F%E8%AE%AE%E5%AD%97%E6%AE%B5.png" alt="avatar"></p><p>10、首部校验和<br><font color="red">占16位，该字段只校验数据报的报头，但不包括数据部分。</font><br><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IP%E9%A6%96%E9%83%A8%E6%A0%A1%E9%AA%8C%E5%90%88.png" alt="avatar"><br>11、源地址<br>占32位</p><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IPSource.png" alt="avatar"></p></blockquote><blockquote><p>12、目的地址<br>占32位</p><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IPDestination.png" alt="avatar"></p></blockquote><hr><blockquote><p><font color="red">ICMP（Internet Control Message Protocol）Internet控制报文协议</font></p></blockquote><blockquote><p>IP协议并不是一个可靠的协议，它不保证数据被送达，那么，自然的，保证数据送达的工作应该由其他的模块来完成。其中一个重要的模块就是ICMP(网络控制报文)协议。<font color="red">ICMP不是高层协议，而是IP层的协议。</font></p></blockquote><blockquote><h4 id="7-ICMP报文结构"><a href="#7-ICMP报文结构" class="headerlink" title="7.ICMP报文结构"></a>7.ICMP报文结构</h4></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/ICMP%E7%BB%93%E6%9E%84.png" alt="avatar"></p></blockquote><blockquote><p>wireshak内抓ICMP报文</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/wireshakICMP.png" alt="avatar"></p></blockquote><p>ICMP报文的各种状态：</p><blockquote><p><font color="red">目的不可达报文</font></p></blockquote><pre><code>      类型：3    代码：0至15    检验和
      未使用（全0）
      收到的IP数据报的一部分，包括IP首部以及数据报数据的前8个字节</code></pre><blockquote><p><font color="red">源端抑制报文</font></p></blockquote><pre><code>      类型：4    代码：0    检验和
      未使用（全0）
      收到的IP数据报的一部分，包括IP首部以及数据报数据的前8个字节</code></pre><blockquote><p><font color="red">超时报文</font></p></blockquote><pre><code>      类型：11    代码：0或1    检验和
      未使用（全0）
      收到的IP数据报的一部分，包括IP首部以及数据报数据的前8个字节</code></pre><blockquote><p><font color="red">参数问题</font></p></blockquote><pre><code>      类型：12    代码：0或1    检验和
      指针    未使用（全0）
      收到的IP数据报的一部分，包括IP首部以及数据报数据的前8个字节</code></pre><blockquote><p><font color="red">改变路由</font></p></blockquote><pre><code>      类型：5    代码：0到3    检验和
      目标路由器IP地址
      收到的IP数据报的一部分，包括IP首部以及数据报数据的前8个字节</code></pre><blockquote><p><font color="red">回送请求和回答</font></p></blockquote><pre><code>      类型：8或0    代码：0    检验和
      标识符    序号
      由请求报文发送；由回答报文重复</code></pre><blockquote><p><font color="red">时间戳请求和回答</font></p></blockquote><pre><code>      类型：13或14    代码：0    检验和
      标识符    序号
      原始时间戳
      接收时间戳
      发送时间戳</code></pre><blockquote><p><font color="red">地址掩码请求和回答</font></p></blockquote><pre><code>      类型：17或18    代码：0    检验和
      标识符    序号
      地址掩码</code></pre><blockquote><p>当传送IP数据包发生错误。比如主机不可达，路由不可达等等，<font color="red">ICMP协议将会把错误信息封包，然后传送回给主机。</font>给主机一个处理错误的机会，这 也就是为什么说建立在IP层以上的协议是可能做到安全的原因。</p></blockquote><h5 id="ping"><a href="#ping" class="headerlink" title=" ping "></a><strong><em><font color="red"> ping</font></em></strong></h5><hr><blockquote><p>ping可以说是ICMP的最著名的应用，是TCP/IP协议的一部分。利用“ping”命令可以检查网络是否连通，可以很好地帮助我们分析和判定网络故障。</p></blockquote><blockquote><p>例如：当我们某一个网站上不去的时候。通常会ping一下这个网站。ping会回显出一些有用的信息。一般的信息如下:</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/pingcommand.png" alt="avatar"></p></blockquote><h5 id="Traceroute"><a href="#Traceroute" class="headerlink" title=" Traceroute "></a><strong><em><font color="red"> Traceroute</font></em></strong></h5><hr><blockquote><p><font color="green">Tracert</font> 命令 路由跟踪 是用来侦测主机到目的主机之间所经路由情况的重要工具，也是最便利的工具。</p></blockquote><blockquote><pre><code>      Traceroute的原理是非常非常的有意思，它收到到目的主机的IP后，首先给目的主机发送一个TTL=1的UDP数据包，而经过的第一个路由器收到这个数据包以后，就自动把TTL减1，而TTL变为0以后，路由器就把这个包给抛弃了，并同时产生 一个主机不可达的ICMP数据报给主机。主机收到这个数据报以后再发一个TTL=2的UDP数据报给目的主机，然后刺激第二个路由器给主机发ICMP数据 报。如此往复直到到达目的主机。这样，traceroute就拿到了所有的路由器IP。</code></pre></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/tracert.png" alt="avatar"></p></blockquote><blockquote><p><font color="red">Best trace :</font> 一款路由追踪可视化软件</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/tracert1.png" alt="avatar"></p></blockquote><h4 id="8-数据链路层："><a href="#8-数据链路层：" class="headerlink" title="8.数据链路层："></a><strong><em>8.数据链路层：</em></strong></h4><blockquote><p>数据包在以太网物理介质上传播之前必须封装头部和尾部信息，封装后的数据包称为数据帧，数据帧中封装的信息决定了数据如何传输。<font color="red">以太网上传输的数据帧有两种格式，选择哪种格式由TCP/IP协议簇中的网络层决定。</font></p></blockquote><h5 id="帧格式"><a href="#帧格式" class="headerlink" title="帧格式:"></a>帧格式:</h5><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E5%B8%A7%E6%A0%BC%E5%BC%8F.png" alt="avatar"></p></blockquote><blockquote><p>以太网上使用两种标准帧格式。第一种是上世纪80年代提出的DIX v2格式，即<font color="red">Ethernet II格式。</font>第二种是1983年提出的<font color="red">IEEE 802.3格式。</font></p></blockquote><blockquote><p>两种格式得区别在于Ethernet 格式中 <font color="red">包含一个Type字段，</font> <font color="green">标识以太网帧处理完之后将被发送到哪个上层协议进行处理，</font> <font color="red">IEEE 802.3格式种，同样位置是长度字段。</font></p></blockquote><blockquote><p>Ethernet II 格式相对使用广泛。</p></blockquote><blockquote><p><font color="red">从Type/Length字段值可以区分两种帧类型：</font>当Type字段值小于等于1500（0x05DC）时，帧使用的是IEEE 802.3格式。当Type字段值大于等于1536（0x0600）时，帧使用的是Ethernet II格式</p></blockquote><blockquote><p>Ethernet II格式</p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/EthernetII%E6%A0%BC%E5%BC%8F.png" alt="avatar"></p></blockquote><blockquote><p>wireshak抓包看看</p></blockquote><blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/Ethernet2.png" alt="avatar"></p></blockquote></blockquote><blockquote><p><font color="red">Ethernet II格式种Data字段长度在46-1500B，故以太网数据帧的长度在64（6+6+2+46+4）—–1518（6+6+2+1500+4）字节之间</font></p></blockquote><blockquote><p>DMAC：目的MAC地址。字段长度6个字节，标识帧的接收者</p></blockquote><blockquote><p><font color="red">SMAC：源MAC地址。字段长度6个字节，标识帧的发送者</font></p></blockquote><blockquote><p><font color="green">Type：类型字段，字段长度2个字节，用于标识数据字段种包含的高层协议。</font></p></blockquote><blockquote><p><font color="red">0x0800 代表 IP协议帧</font></p></blockquote><blockquote><p><font color="green">0x0806 代表ARP协议帧</font></p></blockquote><blockquote><p>Data：数据字段是网络层数据，最小长度必须为46字节</p></blockquote><blockquote><p><font color="green">FCS：循环冗余校验字段，提供了一种错误检测机制，字段长度为4个字节</font></p></blockquote><blockquote><p><font color="red">IEEE802.3</font></p></blockquote><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/IEEE802.3.png" alt="avatar"></p></blockquote><blockquote><p><font color="red">Length字段定于了Data字段包含的字节数</font></p></blockquote><blockquote><p><font color="green">LLC（Logical Link Control）逻辑链路控制，由目的服务访问点DSAP（Destination Service Access Point）、源服务访问点SSAP（Source Service Access Point)和Control字段组成。</font></p></blockquote><blockquote><p><font color="red">SNAP（Sub-network Access Protocol）由机构代码（Org Code）和类型Type字段组成。Org Code三个字节都为0。Type字段的含义与Ethernet II中Type字段相同。</font></p></blockquote><blockquote><p>　 IEEE802.3帧根据DSAP和SSAP字段的取值，又可以分为以下几类：</p></blockquote><blockquote><p><font color="red">1：当DSAP和SSAP都取特定值0xff时，802.3帧就变成了Netware-ETHERNET帧，用来承载NetWare类型的数据</font></p></blockquote><blockquote><p><font color="green">2：当DSAP和SSAP都取特定值0xaa时，802.3帧就变成了ETHERNET_SNAP帧。此帧可以用于传输多种协议。</font></p></blockquote><blockquote><p><font color="red">3：DSAP和SSAP其他的取值均为纯IEEE802.3帧</font></p></blockquote><blockquote><p><font color="green">故可以说4种以太网帧</font></p></blockquote><blockquote><p>物理层负责0、1比特流与物理设备电压高低、光的闪灭之间的互换。数据链路层负责将0、1序列划分为数据帧从一个节点传输到临近的另一个节点,<font color="red">这些节点是通过MAC来唯一标识的(MAC,物理地址，终端的网卡MAC地址，全球独一无二的)。</font></p></blockquote><blockquote><ul><li>封装成帧: 把网络层数据报加头和尾，封装成帧,帧头中包括<font color="red">源MAC地址</font>和<font color="red">目的MAC地址。</font></li><li>透明传输:零比特填充、转义字符。</li><li>可靠传输: 在出错率很低的链路上很少用，但是无线链路WLAN会保证可靠传输。</li><li>差错检测(CRC):接收者检测错误,如果发现差错，丢弃该帧。</li></ul></blockquote><blockquote><h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a><font color="red">总结</font></h5><p><font colo="red">网络设备如何确定以太网数据帧的上层协议？</font></p><pre><code>         以太网帧中包含一个Type字段，表示帧中的数据应该发送到上层哪个协议处理。比如，IP协议对应的Type值为0x0800，ARP协议对应的Type值为0x0806。</code></pre><p><font colo="red">终端设备接收到数据帧时，会如何处理？</font></p><pre><code>         主机检查帧头中的目的MAC地址，如果目的MAC地址不是本机MAC地址，也不是本机侦听的组播或广播MAC地址，则主机会丢弃收到的帧。如果目的MAC地址是本机MAC地址，则接收该帧，检查帧校验序列（FCS）字段，并与本机计算的值对比来确定帧在传输过程中是否保持了完整性。如果检查通过，就会剥离帧头和帧尾，然后根据帧头中的Type字段来决定把数据发送到哪个上层协议进行后续处理。</code></pre></blockquote><h5 id="以太网MAC地址"><a href="#以太网MAC地址" class="headerlink" title="以太网MAC地址"></a>以太网MAC地址</h5><blockquote><p><img src="\images\categories-plugins/猎马.gif" data-original="/images/categories-plugins/%E4%BB%A5%E5%A4%AA%E7%BD%91MAC%E5%9C%B0%E5%9D%80.png" alt="avatar"></p></blockquote><blockquote><p>MAC地址由两部分组成，分别是<font color="red">供应商代码和序列号</font>。其中<font color="red">前24位代表供应商代码，</font>由<font color="green">IEEE管理和分配。</font>剩下的<font color="red">24位序列号由厂商自己分配。</font></p></blockquote><blockquote><p>　　<font color="red">“每一台网络设备都用物理地址来标识自己，MAC地址是全球唯一的。”</font></p></blockquote><h4 id="9-DNS："><a href="#9-DNS：" class="headerlink" title="9.DNS："></a><strong><em>9.DNS：</em></strong></h4><blockquote><p>DNS（Domain Name System，域名系统），因特网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。通过主机名，最终得到该主机名对应的IP地址的过程叫做域名解析（或主机名解析）。<font color="red">DNS协议运行在UDP协议之上，使用端口号53。</font></p></blockquote><p>小结：<font color="red"> 这些内容很多是摘录他人博客的 需要慢慢消化 变为自己的</font></p><h1 id="END"><a href="#END" class="headerlink" title="END"></a>END</h1><blockquote><p>本文为个人学习笔记 随缘更新 ，文章质量不高 大佬勿喷。<br>By___Psych0</p></blockquote><div class="article-footer-copyright">本博客采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议(CC BY-NC-SA 4.0) 发布.</a></div></div><span id="busuanzi_container_page_pv" style="display:none"><b>本文总阅读量<span id="busuanzi_value_page_pv"></span>次</b></span><div><center><div class="pagination"><a href="/posts/8564.html" type="button" class="btn btn-default"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a> <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a> <a href="/posts/61403.html" type="button" class="btn btn-default">下一页<i class="fa fa-arrow-circle-o-right"></i></a></div></center><script type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?cl=080808&w=500&t=n&d=SXGq7M8qU-pUc8C8PWmM7vMg1pG4JcAl-dZHBIP3bxs&co=ffffff&cmo=3acc3a&cmn=ff5353&ct=808080"></script></div><section id="comments" class="comments"><style>.comments{margin:30px;padding:10px;background:#000}@media screen and (max-width:800px){.comments{margin:auto;padding:10px;background:#000}}</style><div id="vcomment" class="comment"></div><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script>var valineConfig={enable:!0,appId:"0M0P7w7k0ohe9hbbWful3a1u-gzGzoHsz",appKey:"zQzVgcRo008dNFbd7p0IJ2Mg",placeholder:"提交评论时留下邮箱收到回复后将自动通知",visitor:!0,avatar:"monsterid",requiredFields:["nick","mail"],el:"#vcomment"};new Valine(valineConfig)</script></section></div><div id="side_meta"><div class="col-md-3" id="post_meta"><div class="meta-widget"><i class="fa fa-clock-o"></i> 2020-12-28</div><div class="meta-widget"><a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a><ul id="categorys" class="tag_box list-unstyled collapse in"><li></li><li><a href="/categories/Network/">Network<span>2</span></a></li></ul></div><div class="meta-widget"><a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a><ul id="tags" class="tag_box list-unstyled collapse in"><li><a href="/tags/Network/">Network<span>2</span></a></li></ul></div><div class="meta-widget"><a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a><div id="toc" class="toc collapse in"><span class="toc-title">Contents</span><ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#1-TCP-IP%E5%8D%8F%E8%AE%AE%E6%A8%A1%E5%9E%8B"><span class="toc-article-text">1.TCP&#x2F;IP协议模型</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#TCP%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="toc-article-text">TCP协议的特点：</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#TCP%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%BB%BA%E7%AB%8B%E4%B8%8E%E7%BB%88%E6%AD%A2"><span class="toc-article-text">TCP连接的建立与终止</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-article-text">三次握手</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-article-text">四次挥手</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#TCP-UDP"><span class="toc-article-text">TCP&#x2F;UDP</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-article-text">TCP流量控制</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-article-text">TCP拥塞控制</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%BF%AB%E9%87%8D%E4%BC%A0%E5%92%8C%E5%BF%AB%E6%81%A2%E5%A4%8D"><span class="toc-article-text">快重传和快恢复</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#TCP%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-article-text">TCP报文结构：</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#2-%E6%8A%93%E4%B8%AATCP%E5%8C%85%E7%9C%8B%E7%9C%8B"><span class="toc-article-text">2.抓个TCP包看看</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#3-%E5%90%84%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A7%A3%E9%87%8A"><span class="toc-article-text">3.各个字段的解释</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#%E6%BA%90%E7%AB%AF%E5%8F%A3%EF%BC%88Source-Port%EF%BC%89%EF%BC%8C%E7%9B%AE%E6%A0%87%E7%AB%AF%E5%8F%A3%EF%BC%88Destination-Port%EF%BC%89-%E5%90%842%E5%AD%97%E8%8A%82"><span class="toc-article-text">源端口（Source Port），目标端口（Destination Port） 各2字节</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#%E5%B0%81%E5%8C%85%E5%BA%8F%E5%8F%B7%EF%BC%88Sequence-Number%EF%BC%89-4%E5%AD%97%E8%8A%82"><span class="toc-article-text">封包序号（Sequence Number） 4字节</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#%E7%A1%AE%E8%AE%A4%E5%8F%B7%EF%BC%88Acknowledge-Number%EF%BC%89-4%E5%AD%97%E8%8A%82"><span class="toc-article-text">确认号（Acknowledge Number） 4字节</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#%E6%95%B0%E6%8D%AE%E5%81%8F%E7%A7%BB%EF%BC%88Data-Offset%EF%BC%894%E6%AF%94%E7%89%B9"><span class="toc-article-text">数据偏移（Data Offset）4比特</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#%E4%BF%9D%E7%95%99%E5%AD%97%E6%AE%B5%EF%BC%88Reserved%EF%BC%89-%E5%8D%A06%E6%AF%94%E7%89%B9"><span class="toc-article-text">保留字段（Reserved） 占6比特</span></a></li></ol></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#4-%E7%8A%B6%E6%80%81%E6%8E%A7%E5%88%B6%E7%A0%81%EF%BC%88Code%EF%BC%8CControl-Flag%EF%BC%89"><span class="toc-article-text">4.状态控制码（Code，Control Flag）</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E7%B4%A7%E6%80%A5URG%EF%BC%9A"><span class="toc-article-text">紧急URG：</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E7%A1%AE%E8%AE%A4ACK%EF%BC%9A"><span class="toc-article-text">确认ACK：</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E6%8E%A8%E9%80%81PSH%EF%BC%9A"><span class="toc-article-text">推送PSH：</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E5%A4%8D%E4%BD%8DRST%EF%BC%9A"><span class="toc-article-text">复位RST：</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E5%90%8C%E6%AD%A5SYN%EF%BC%9A"><span class="toc-article-text">同步SYN：</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E7%BB%88%E6%AD%A2FIN%EF%BC%9A"><span class="toc-article-text">终止FIN：</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%EF%BC%88Window%EF%BC%89"><span class="toc-article-text">滑动窗口（Window）</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#TCP%E6%A0%A1%E9%AA%8C%E5%92%8C-Checksum"><span class="toc-article-text">TCP校验和(Checksum)  </span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E7%B4%A7%E6%80%A5%E6%8C%87%E9%92%88-Urgent-Pointer"><span class="toc-article-text">紧急指针(Urgent Pointer)</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E9%80%89%E9%A1%B9%EF%BC%88Options%EF%BC%89"><span class="toc-article-text">选项（Options）</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#TCP%E9%A6%96%E9%83%A8%E7%9A%84%E4%B8%BB%E8%A6%81%E9%80%89%E9%A1%B9%EF%BC%9A"><span class="toc-article-text">TCP首部的主要选项：</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E5%A1%AB%E5%85%85%E5%AD%97%E6%AE%B5-Padding"><span class="toc-article-text">填充字段(Padding):</span></a></li></ol></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#5-UDP%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%84"><span class="toc-article-text">5.UDP报文结构</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#6-IP%E7%9A%84%E5%A4%B4%E9%83%A8%E5%B0%81%E8%A3%85%EF%BC%9A"><span class="toc-article-text">6.IP的头部封装：</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#IP%E6%8A%A5%E6%96%87%E5%90%84%E5%AD%97%E6%AE%B5%E7%9A%84%E5%90%AB%E4%B9%89%E5%A6%82%E4%B8%8B"><span class="toc-article-text">IP报文各字段的含义如下</span></a></li></ol></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#7-ICMP%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%84"><span class="toc-article-text">7.ICMP报文结构</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#ping"><span class="toc-article-text">ping</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#Traceroute"><span class="toc-article-text">Traceroute</span></a></li></ol></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#8-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%9A"><span class="toc-article-text">8.数据链路层：</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-article-text">帧格式:</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-article-text">总结</span></a></li><li class="toc-article-item toc-article-level-5"><a class="toc-article-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91MAC%E5%9C%B0%E5%9D%80"><span class="toc-article-text">以太网MAC地址</span></a></li></ol></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#9-DNS%EF%BC%9A"><span class="toc-article-text">9.DNS：</span></a></li></ol><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#END"><span class="toc-article-text">END</span></a></li></div></div><hr></div></div></div></div></div><div class="container-narrow"><footer><p>&copy; 2021 Psych0's Blog powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a></p>&nbsp;<div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_pv" style="display:none"><b>本站总访问量<span id="busuanzi_value_site_pv"></span>次</b></span></div>&nbsp; <b><div><span id="sitetime"></span><script language="javascript">function siteTime(){window.setTimeout("siteTime()",1e3);var e=36e5,t=24*e,o=new Date,i=o.getFullYear(),a=o.getMonth()+1,n=o.getDate(),r=o.getHours(),l=o.getMinutes(),s=o.getSeconds(),o=Date.UTC(2020,3,3,23,14,0),n=Date.UTC(i,a,n,r,l,s)-o,r=Math.floor(n/31536e6),l=Math.floor(n/t-365*r),s=Math.floor((n-(365*r+l)*t)/e),o=Math.floor((n-(365*r+l)*t-s*e)/6e4),e=Math.floor((n-(365*r+l)*t-s*e-6e4*o)/1e3);document.getElementById("sitetime").innerHTML=" 已运行"+l+" 天 "+s+" 小时 "+o+" 分钟 "+e+" 秒"}siteTime()</script></div></b></footer></div><a id="gotop" href="#"><span>⬆︎TOP</span></a><script src="/js/jquery.imagesloaded.min.js"></script><script src="/js/gallery.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/search.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script type="text/javascript">jQuery(".fancybox").fancybox()</script><script type="text/javascript">var search_path="search.xml",path="/"+(search_path=0==search_path.length?"search.xml":search_path);searchFunc(path,"local-search-input","local-search-result")</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html><div><style type="text/css">.aplayer{background:#0000;font-family:Arial,Helvetica,sans-serif;margin:5px;box-shadow:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);border-radius:2px;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:normal;position:relative}.aplayer *{box-sizing:content-box}.aplayer svg{width:100%;height:100%}.aplayer svg circle,.aplayer svg path{fill:#0000}.aplayer.aplayer-withlist .aplayer-info{border-bottom:1px solid #0000}.aplayer.aplayer-withlist .aplayer-list{display:block}.aplayer.aplayer-withlist .aplayer-icon-order,.aplayer.aplayer-withlist .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-menu{display:inline}.aplayer.aplayer-withlrc .aplayer-pic{height:90px;width:90px}.aplayer.aplayer-withlrc .aplayer-info{margin-left:90px;height:90px;padding:10px 7px 0}.aplayer.aplayer-withlrc .aplayer-lrc{display:block}.aplayer.aplayer-narrow{width:66px}.aplayer.aplayer-narrow .aplayer-info,.aplayer.aplayer-narrow .aplayer-list{display:none}.aplayer.aplayer-narrow .aplayer-body,.aplayer.aplayer-narrow .aplayer-pic{height:66px;width:66px}.aplayer.aplayer-fixed{position:fixed;bottom:0;left:0;right:0;margin:0;z-index:99;overflow:visible;max-width:400px;box-shadow:none}.aplayer.aplayer-fixed .aplayer-list{margin-bottom:65px;border:1px solid #0000;border-bottom:none}.aplayer.aplayer-fixed .aplayer-body{position:fixed;bottom:0;left:0;right:0;margin:0;z-index:99;background:#000;padding-right:18px;transition:all .3s ease;max-width:400px}.aplayer.aplayer-fixed .aplayer-lrc{display:block;position:fixed;bottom:10px;left:0;right:0;margin:0;z-index:98;pointer-events:none;text-shadow:-1px -1px 0 #000}.aplayer.aplayer-fixed .aplayer-lrc:after,.aplayer.aplayer-fixed .aplayer-lrc:before{display:none}.aplayer.aplayer-fixed .aplayer-info{-webkit-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:0 0;transform-origin:0 0;transition:all .3s ease;border-bottom:none;border-top:1px solid #0000}.aplayer.aplayer-fixed .aplayer-info .aplayer-music{width:calc(100% - 105px)}.aplayer.aplayer-fixed .aplayer-miniswitcher{display:block}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-info{display:block;-webkit-transform:scaleX(0);transform:scaleX(0)}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{width:66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-miniswitcher .aplayer-icon{-webkit-transform:rotateY(0);transform:rotateY(0)}.aplayer.aplayer-fixed .aplayer-icon-back,.aplayer.aplayer-fixed .aplayer-icon-forward,.aplayer.aplayer-fixed .aplayer-icon-lrc,.aplayer.aplayer-fixed .aplayer-icon-play{display:inline-block}.aplayer.aplayer-fixed .aplayer-icon-back,.aplayer.aplayer-fixed .aplayer-icon-forward,.aplayer.aplayer-fixed .aplayer-icon-menu,.aplayer.aplayer-fixed .aplayer-icon-play{position:absolute;bottom:27px;width:20px;height:20px}.aplayer.aplayer-fixed .aplayer-icon-back{right:75px}.aplayer.aplayer-fixed .aplayer-icon-play{right:50px}.aplayer.aplayer-fixed .aplayer-icon-forward{right:25px}.aplayer.aplayer-fixed .aplayer-icon-menu{right:0}.aplayer.aplayer-arrow .aplayer-icon-loop,.aplayer.aplayer-arrow .aplayer-icon-order,.aplayer.aplayer-mobile .aplayer-icon-volume-down{display:none}.aplayer.aplayer-loading .aplayer-info .aplayer-controller .aplayer-loading-icon{display:block}.aplayer.aplayer-loading .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played .aplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.aplayer .aplayer-body{position:relative}.aplayer .aplayer-icon{width:15px;height:15px;border:none;background-color:transparent;outline:0;cursor:pointer;opacity:.8;vertical-align:middle;padding:0;font-size:12px;margin:0;display:inline-block}.aplayer .aplayer-icon path{transition:all .2s ease-in-out}.aplayer .aplayer-icon-back,.aplayer .aplayer-icon-forward,.aplayer .aplayer-icon-lrc,.aplayer .aplayer-icon-order,.aplayer .aplayer-icon-play{display:none}.aplayer .aplayer-icon-lrc-inactivity svg{opacity:.4}.aplayer .aplayer-icon-forward{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.aplayer .aplayer-lrc-content{display:none}.aplayer .aplayer-pic{position:relative;float:left;height:66px;width:66px;background-size:cover;background-position:50%;transition:all .3s ease;cursor:pointer}.aplayer .aplayer-pic:hover .aplayer-button{opacity:1}.aplayer .aplayer-pic .aplayer-button{position:absolute;border-radius:50%;opacity:.8;text-shadow:0 1px 1px rgba(0,0,0,.2);box-shadow:0 1px 1px rgba(0,0,0,.2);background:rgba(0,0,0,.2);transition:all .1s ease}.aplayer .aplayer-pic .aplayer-button path{fill:RED}.aplayer .aplayer-pic .aplayer-hide{display:none}.aplayer .aplayer-pic .aplayer-play{width:26px;height:26px;border:2px solid #000;bottom:50%;right:50%;margin:0 -15px -15px 0}.aplayer .aplayer-pic .aplayer-play svg{position:absolute;top:3px;left:4px;height:20px;width:20px}.aplayer .aplayer-pic .aplayer-pause{width:16px;height:16px;border:2px solid #000;bottom:4px;right:4px}.aplayer .aplayer-pic .aplayer-pause svg{position:absolute;top:2px;left:2px;height:12px;width:12px}.aplayer .aplayer-info{margin-left:66px;padding:14px 7px 0 10px;height:66px;box-sizing:border-box}.aplayer .aplayer-info .aplayer-music{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:0 0 13px 5px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:default;padding-bottom:2px;height:20px}.aplayer .aplayer-info .aplayer-music .aplayer-title{font-size:14px}.aplayer .aplayer-info .aplayer-music .aplayer-author{font-size:12px;color:#aaa}.aplayer .aplayer-info .aplayer-controller{position:relative;display:flex}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap{margin:0 0 0 5px;padding:4px 0;cursor:pointer!important;flex:1}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap:hover .aplayer-bar .aplayer-played .aplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar{position:relative;height:2px;width:100%;background:red}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-loaded{position:absolute;left:0;top:0;bottom:0;background:#aaa;height:2px;transition:all .5s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played{position:absolute;left:0;top:0;bottom:0;height:2px}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played .aplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:10px;width:10px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;-webkit-transform:scale(0);transform:scale(0)}.aplayer .aplayer-info .aplayer-controller .aplayer-time{position:relative;right:0;bottom:4px;height:17px;color:#999;font-size:11px;padding-left:7px}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-time-inner{vertical-align:middle}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon{cursor:pointer;transition:all .2s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon path{fill:red}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-loop{margin-right:2px}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon:hover path{fill:#red}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-menu,.aplayer .aplayer-info .aplayer-controller .aplayer-time.aplayer-time-narrow .aplayer-icon-menu,.aplayer .aplayer-info .aplayer-controller .aplayer-time.aplayer-time-narrow .aplayer-icon-mode{display:none}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap{position:relative;display:inline-block;margin-left:3px;cursor:pointer!important}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap:hover .aplayer-volume-bar-wrap{height:40px}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap{position:absolute;bottom:15px;right:-3px;width:25px;height:0;z-index:99;overflow:hidden;transition:all .2s ease-in-out}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap.aplayer-volume-bar-wrap-active{height:40px}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap .aplayer-volume-bar{position:absolute;bottom:0;right:10px;width:5px;height:35px;background:#000;border-radius:2.5px;overflow:hidden}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap .aplayer-volume-bar .aplayer-volume{position:absolute;bottom:0;right:0;width:5px;transition:all .1s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-loading-icon{display:none}.aplayer .aplayer-info .aplayer-controller .aplayer-loading-icon svg{position:absolute;-webkit-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite}.aplayer .aplayer-lrc{display:none;position:relative;height:30px;text-align:center;overflow:hidden;margin:-10px 0 7px}.aplayer .aplayer-lrc:before{top:0;height:10%;background:linear-gradient(180deg,red 0,hsla(0,0%,100%,0))}.aplayer .aplayer-lrc:after,.aplayer .aplayer-lrc:before{position:absolute;z-index:1;display:block;overflow:hidden;width:100%;content:" "}.aplayer .aplayer-lrc:after{bottom:0;height:33%;background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8))}.aplayer .aplayer-lrc p{font-size:12px;color:#000;line-height:16px!important;height:16px!important;padding:0!important;margin:0!important;transition:all .5s ease-out;opacity:.4;overflow:hidden}.aplayer .aplayer-lrc p.aplayer-lrc-current{opacity:1;overflow:visible;height:auto!important;min-height:16px}.aplayer .aplayer-lrc.aplayer-lrc-hide{display:none}.aplayer .aplayer-lrc .aplayer-lrc-contents{width:100%;transition:all .5s ease-out;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:default}.aplayer .aplayer-list{overflow:auto;transition:all .5s ease;will-change:height;display:none;overflow:hidden}.aplayer .aplayer-list.aplayer-list-hide{max-height:0!important}.aplayer .aplayer-list ol{list-style-type:none;margin:0;padding:0;overflow-y:auto}.aplayer .aplayer-list ol::-webkit-scrollbar{width:5px}.aplayer .aplayer-list ol::-webkit-scrollbar-thumb{border-radius:3px;background-color:red}.aplayer .aplayer-list ol::-webkit-scrollbar-thumb:hover{background-color:red}.aplayer .aplayer-list ol li{position:relative;height:32px;line-height:32px;padding:0 15px;font-size:12px;border-top:1px solid #e9e9e9;cursor:pointer;transition:all .2s ease;overflow:hidden;margin:0}.aplayer .aplayer-list ol li:first-child{border-top:none}.aplayer .aplayer-list ol li:hover{background:green}.aplayer .aplayer-list ol li.aplayer-list-light{background:red}.aplayer .aplayer-list ol li.aplayer-list-light .aplayer-list-cur{display:inline-block}.aplayer .aplayer-list ol li .aplayer-list-cur{display:none;width:3px;height:22px;position:absolute;left:0;top:5px;cursor:pointer}.aplayer .aplayer-list ol li .aplayer-list-index{color:#666;margin-right:12px;cursor:pointer}.aplayer .aplayer-list ol li .aplayer-list-author{color:#000;float:right;cursor:pointer}.aplayer .aplayer-notice{opacity:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:12px;border-radius:4px;padding:5px 10px;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none;background-color:#f4f4f5;color:#909399}.aplayer .aplayer-miniswitcher{display:none;position:absolute;top:0;right:0;bottom:0;height:100%;background:#e6e6e6;width:18px;border-radius:0 2px 2px 0}.aplayer .aplayer-miniswitcher .aplayer-icon{height:100%;width:100%;-webkit-transform:rotateY(180deg);transform:rotateY(180deg);transition:all .3s ease}.aplayer .aplayer-miniswitcher .aplayer-icon path{fill:#666}.aplayer .aplayer-miniswitcher .aplayer-icon:hover path{fill:#000}@-webkit-keyframes aplayer-roll{0%{left:0}to{left:-100%}}@keyframes aplayer-roll{0%{left:0}to{left:-100%}}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}</style><div id="aplayer"></div><div id="aplayer" style="position:absolute"></div><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/color-thief-don@2.0.2/src/color-thief.js"></script><script>const ap=new APlayer({container:document.getElementById("aplayer"),autoplay:!0,listFolded:!0,order:"random",loop:"all",theme:"#e9e9e9",preload:"auto",mutex:!0,volume:.7,fixed:!0,audio:[{name:"world.execute",artist:"Mili",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/-OxCLbGs-JxKtPaBCo1yuw==/18801648835570109.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=435278010.mp3"},{name:"on the precipice of defeat",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/CCSmvvvZO67cHGkZudmOgg==/877410278965376.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=504481.mp3"},{name:"Fade To Black_B13a",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953217.mp3"},{name:"Fade To Black_A06",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953200.mp3"},{name:"Pray That You Always Understand Me_FX   ",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953201.mp3"},{name:"Stand Up Be Strong",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953219.mp3"},{name:"What Can You See In Their Eyes",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953218.mp3"},{name:"SuiteWill of the Heart1st Mouvement:Cello&Orchestra",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953211.mp3"},{name:"SuiteWill of the Heart2nd Mouvement:Violin",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953212.mp3"},{name:"Fade To Black_B14",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953216.mp3"},{name:"Nothing Can Explained_Instrumental 2008",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953203.mp3"},{name:"soundscape to ardor",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/4EptBnAWcZ2ajSq5ENghLA==/661905999933298.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=503465.mp3"},{name:"soundscape to ardor",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/4EptBnAWcZ2ajSq5ENghLA==/661905999933298.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=503465.mp3"},{name:"Fade To Black_B07a",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953210.mp3"},{name:"SuiteNever Meant to Belong3rd Mouvement:Piano",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953208.mp3"},{name:"SuiteNever Meant to Belong2nd Mouvement:Cello&Orchestra",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953207.mp3"},{name:"SuiteNever Meant to Belong1st Mouvement:Violin",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/IZYL5EEHwzNhv8jDN5HwAQ==/5937362790192405.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4953206.mp3"},{name:"*~アスタリスク~",artist:"ORANGE RANGE",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/3QizI7X29AEeShmL0JhpZA==/3207275418299454.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4969760.mp3"},{name:"サンキュー!!",artist:"HOME MADE 家族",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/3QizI7X29AEeShmL0JhpZA==/3207275418299454.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=4969762.mp3"},{name:"here to stay",artist:"鷺巣詩郎",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/4YREx5v1p2d5_wFSbGCOKg==/715782069694222.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=504326.mp3"},{name:"Fatum Plebis ",artist:"Immediate Music",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/RZ3xkuyO3ZE3keWlQYZaWA==/1725133743987647.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1461555.mp3"},{name:"Bleed it Out",artist:"8-bit",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/6By5xESWLMfUrEHocJ6dZQ==/109951163566017493.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1312300574.mp3"},{name:"Psycho",artist:"Pt. 2 ",lrc:"",cover:"http://p4.music.126.net/Z8q0skkFiyZUxzJK2uCYcg==/109951164939830012.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=440208643.mp3"},{name:"Komorebi",artist:"m-taku",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/YuQQw6jiLaxQ7oa1-wGJew==/3247957350394210.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=29803287.mp3"},{name:"See It Again",artist:"Pt. 2 ",lrc:"[00:02.38]Cause I was was was[00:03.96]We know we",cover:"http://p4.music.126.net/H_EyOwGfyVZE7GDC-nAD1g==/18574049929665771.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=447076645.mp3"},{name:"17",artist:"MK",lrc:"[00:00.000] 作词 :",cover:"http://p2.music.126.net/1s9hwo4bBrFn8J1Q2Vtkkg==/109951165982382722.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=501846795.mp3"},{name:"Time",artist:"MKJ",lrc:"1",cover:"http://p4.music.126.net/ClQyajrD09sGC8Or13I3FA==/109951163649593576.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=33035611.mp3"},{name:"END",artist:"DY_Freedom",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/I8Ed9WK6c8WfVlJySvV71g==/109951165297037146.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1489346184.mp3"},{name:"Улетали птицами гордыми",artist:"7ouTp",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/5pBaokODRNsIJfr_u49g3A==/109951164922368825.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1426195471.mp3"},{name:"Normalcy",artist:"Aether,Veela",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/HwW5AF0SxHQH1bUoL9_ttg==/109951165894999376.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1837764978.mp3"},{name:"颓",artist:"九块钱,99Percent",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/yDgcXp3ayvuHbFkKTwfeWA==/109951163165588935.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=541648644.mp3"},{name:"Remembrance",artist:"Wisp X",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/SFRWqGErTDzKTRRvmqjVag==/109951164836776273.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=30780430.mp3"},{name:"Just Exist",artist:"Aether,Veela",lrc:"[00:00.000] 作曲 : Jason Taylor[00:05.952]There",cover:"http://p3.music.126.net/HwW5AF0SxHQH1bUoL9_ttg==/109951165894999376.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1837763905.mp3"},{name:"Rolling star",artist:"YUI",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/8VGNmKj4P2WfjOm2tGfnHg==/2321069046258532.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=26082104.mp3"},{name:"Yours Truly",artist:"Mr FijiWiji,Danyka Nadeau",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/_jn4KJ1C_pDMvThO22-2bQ==/109951163640416291.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=30854503.mp3"},{name:"The Sweetest Sin",artist:"RÆVE,Tep No",lrc:"[00:00.00] 无效歌词",cover:"http://p4.music.126.net/N90xw5AFNmdpXavnNCZt4Q==/109951164855952363.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=469744191.mp3"},{name:"first kiss",artist:"elijah who ",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/nDUgYI2njwmCRskpt1aprA==/19095218439745316.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=480286151.mp3"},{name:"bad guy",artist:"Billie Eilish ",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/ARn_7WFEy81bwiDwwgm2AA==/109951163959066909.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1355147933.mp3"},{name:"Super Psycho Love",artist:"Simon Curtis ",lrc:"[00:28.600]Something lately drives me crazy[00:30.670",cover:"http://p3.music.126.net/2x0dc0YWUR9lHPy8AE5I8A==/804842511584878.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1989392.mp3"},{name:"Helpless",artist:"SWALEN",lrc:"[00:00.000] 作词 :",cover:"http://p3.music.126.net/A6b5r0fFpQyRQBW3wdsLWg==/109951163438333137.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1298387568.mp3"},{name:"失波 (Lost Frequencis)",artist:"R7CKY",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/STfhMRMhE0exGT4Mm8dSYg==/18258490091275454.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=426342468.mp3"},{name:"Are You With Me",artist:"Lost Frequencies ",lrc:"[00:00.00] 暂无歌词 ",cover:"http://p3.music.126.net/dc_kyRDAgRgKKbdJjy26Nw==/109951163118657056.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=29806043.mp3"},{name:"Fiery Sky",artist:"Jarico",lrc:"[00:00.00] 暂无歌词",cover:"http://y.gtimg.cn/music/photo_new/T002R300x300M000000aIXmm3dBklc.jpg",url:"http://music.163.com/song/media/outer/url?id=1325896666.mp3"},{name:"About You",artist:"Aether",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/FtpEap9XTw40u5DcseTDLg==/109951163387384909.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=521749122.mp3"},{name:"BLISS",artist:"Ken Arai",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/SVJNKYtlB_n9I7p0017Ndw==/6635552674995921.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=29816791.mp3"},{name:"Im No Magician",artist:"Vincent,Love, Alexa",lrc:"[00:00.00] 暂无歌词",cover:"http://p3.music.126.net/PR7xKPZX4fuU5vKKhFWOFA==/109951163876412542.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1347136305.mp3"},{name:"Ride It",artist:"Regard",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/_FEXx8L4oNvuBsiKUdxbQw==/109951165986861088.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1379945341.mp3"},{name:"Stay",artist:"Henry Krinkle",lrc:"[00:00.00] 暂无歌词",cover:"http://imge.kugou.com/stdmusic/150/20161028/20161028023518854849.jpg",url:"http://music.163.com/song/media/outer/url?id=33737976.mp3"},{name:"Fire",artist:"Axero",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/LIYKha4TeJNCGqXrP3CfAQ==/109951164385232720.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=29769301.mp3"},{name:"Let You Down",artist:"NF",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/edUo6gpv9vvO-6tLHHWHVQ==/109951165422149615.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=1490832836.mp3"},{name:"Hero s Come Back!!",artist:"nobodyknows+",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/EUK2e7ztK3sGfV6yNVVASA==/109951165977590875.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=789254.mp3"},{name:"Life Is Like A Boat - Rie fu",artist:"Rie fu",lrc:"[00:00.00] 暂无歌词",cover:"http://p4.music.126.net/S2U-jVMYiJQfXVEaZnpANg==/4420036743668385.jpg?param=300x300",url:"http://music.163.com/song/media/outer/url?id=640565.mp3"}]}),colorThief=new ColorThief,setTheme=e=>{ap.list.audios[e].theme||colorThief.getColorAsync(ap.list.audios[e].cover,function(t){ap.theme(`rgb(${t[0]}, ${t[1]}, ${t[2]})`,e)})};setTheme(ap.list.index),ap.on("listswitch",t=>{setTheme(t.index)})</script></div>